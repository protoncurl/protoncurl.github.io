import{e as A,c as l,o as i,a as o,f as _,d as v,t as r,n as W,F as b,r as S,_ as K,s as te,g as Q,h as ae,i as oe,j as se,k as ie,l as c,m as le,q as re,b as y,u as N,v as de,x as n,w as D,y as ue,z as _e,A as J,B as ce}from"./D4JwQQSu.js";import{_ as pe}from"./Xe7B-oiA.js";import{s as C,g as me,p as F,a as L,b as $,c as B}from"./EFeNkQE9.js";import{u as ge}from"./DhhEuvz0.js";const ye={class:"mb-3 me-3 mt-3 d-inline-block position-relative"},ve={key:0,class:"ms-1",viewBox:"0 0 24 24",height:"1em",focusable:"false"},be={key:1,class:"ms-1",viewBox:"0 0 24 24",height:"1em",focusable:"false"},ke={key:0,class:"btn filter_dropdown"},he=["onClick"],fe={key:1},we=A({__name:"Filter",props:{name:{},selected_id:{},options:{},error:{},showDropdown:{}},emits:["select","open"],setup(f){return(e,u)=>(i(),l("div",ye,[o("button",{class:W(["btn","filter_button",{opened:e.showDropdown==e.name},{active:e.selected_id}]),onClick:u[0]||(u[0]=p=>{e.$emit("open",e.showDropdown==e.name?"":e.name)})},[v(r(e.name)+" ",1),e.showDropdown==e.name?(i(),l("svg",ve,u[1]||(u[1]=[o("path",{d:"M2.64 15.994c0-.192.073-.384.219-.53l7.55-7.55a2.25 2.25 0 0 1 3.181 0l7.551 7.55a.75.75 0 1 1-1.06 1.06l-7.551-7.55a.75.75 0 0 0-1.06 0l-7.55 7.55a.75.75 0 0 1-1.28-.53"},null,-1)]))):(i(),l("svg",be,u[2]||(u[2]=[o("path",{d:"M2.859 7.475a.75.75 0 0 1 1.06 0l7.55 7.55a.75.75 0 0 0 1.06 0l7.551-7.55a.75.75 0 1 1 1.061 1.06l-7.55 7.55a2.25 2.25 0 0 1-3.182 0l-7.55-7.55a.75.75 0 0 1 0-1.06"},null,-1)])))],2),e.showDropdown==e.name?(i(),l("div",ke,[(i(!0),l(b,null,S(e.options,p=>(i(),l("button",{class:W(["btn",{active:e.selected_id==p.id}]),onClick:m=>{e.$emit("select",p.id),e.$emit("open","")}},r(p.name),11,he))),256))])):_("",!0),e.error?(i(),l("div",fe," Er ging iets mis met het ophalen van de gegevens: "+r(e.error),1)):_("",!0)]))}}),je=K(we,[["__scopeId","data-v-800594f5"]]),De=Symbol.for("nuxt:client-only"),Ce=A({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(f,{slots:e,attrs:u}){const p=te(!1);Q(()=>{p.value=!0});const m=se();return m&&(m._nuxtClientOnly=!0),ie(De,!0),()=>{var j;if(p.value){const h=(j=e.default)==null?void 0:j.call(e);return h&&h.length===1?[ae(h[0],u)]:h}const k=e.fallback||e.placeholder;if(k)return oe(k);const g=f.fallback||f.placeholder||"",T=f.fallbackTag||f.placeholderTag||"span";return l(T,u,g)}}}),$e={class:"row justify-content-center"},Se={class:"col-lg-6"},Te={class:"input-group mb-3 search-input"},qe={class:"row mb-3"},ze={class:"col-6 mt-2"},Ve={class:"col-6 d-flex justify-content-end"},Me={key:0},Oe={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"},Ne={class:"col"},Be={class:"card h-100"},We=["src"],Fe={class:"card-body"},Le={class:"card-title"},Ae={class:"card-subtitle text-body-secondary float-end"},Ee={key:0,class:"card-subtitle mb-3 text-body-secondary"},Ie={class:"fs-5"},Pe={key:0,class:"text-decoration-line-through ms-1"},Re=["href"],He={key:0,class:"text-body-secondary me-2"},Ue={key:1,class:"table"},Ze=["href"],Ge={class:"ms-2"},Je={key:0,class:"text-body-secondary ms-1"},Ke={key:1,class:"text-decoration-line-through ms-1"},Qe={key:2,class:"text-body-secondary text-decoration-line-through ms-1"},Xe={key:3,class:"ms-2"},Ye={key:4},xe={key:0,class:"text-body-secondary"},en={class:"text-body-secondary"},nn={class:"row justify-content-center mt-3"},tn={class:"col-12 d-flex justify-content-center"},an={class:"mt-2 ms-3 me-3"},on={key:1},sn={class:"row justify-content-center"},ln={class:"col-xl-6"},rn=A({__name:"vitamine",setup(f){ge({title:"Vitamines & mineralen"});const e=c({query:"",source_id:null,brand_id:null,category_id:null,subcategory_id:null}),u=c(""),p=c([]),m=c(0),k=c(null),g=c(1),T=le(()=>Math.ceil(m.value/100));async function j(){if(X(),Y(),x(),ee(),!(e.value.query.trim().length>=3||e.value.source_id||e.value.brand_id||e.value.category_id||e.value.subcategory_id)){p.value=[],m.value=0,k.value=null;return}const{data:s,error:t}=await C.rpc("search",{query:e.value.query.trim().length>=3?e.value.query:void 0,selected_source_id:e.value.source_id??void 0,selected_brand_id:e.value.brand_id??void 0,selected_category_id:e.value.category_id??void 0,selected_subcategory_id:e.value.subcategory_id??void 0,sort_by:V.value,page:g.value});p.value=me(s)??[],m.value=s&&s.length>0?s[0].total:0,k.value=t}Q(()=>{j()});let h;function q(){clearTimeout(h),h=setTimeout(()=>{j()},500)}re(e.value,()=>{g.value=1,q()});function z(){return{query:e.value.query.trim().length>=3?e.value.query:void 0,selected_category_id:e.value.category_id??void 0,selected_subcategory_id:e.value.subcategory_id??void 0,selected_brand_id:e.value.brand_id??void 0,selected_source_id:e.value.source_id??void 0}}const E=c([]),I=c(null);async function X(){const{data:s,error:t}=await C.rpc("categories_by_count",z());E.value=s??[],I.value=t}const P=c([]),R=c(null);async function Y(){const{data:s,error:t}=e.value.category_id?await C.rpc("subcategories_by_count",z()):{data:[],error:null};P.value=s??[],R.value=t}const H=c([]),U=c(null);async function x(){const{data:s,error:t}=await C.rpc("brands_by_count",z());H.value=s??[],U.value=t}const Z=c([]),G=c(null);async function ee(){const{data:s,error:t}=await C.rpc("sources_by_count",z());Z.value=s??[],G.value=t}const w=c(!0),V=c("price");return(s,t)=>{const M=je,ne=Ce,O=pe;return i(),l(b,null,[o("div",$e,[o("div",Se,[o("div",Te,[N(o("input",{type:"text",placeholder:"Welk product zoek je?",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>n(e).query=a)},null,512),[[de,n(e).query]]),t[14]||(t[14]=o("div",{class:"input-group-append"},[o("span",{class:"input-group-text"},[o("i",{class:"bi bi-search"})])],-1))])])]),y(ne,null,{default:D(()=>[y(M,{name:"Categorie",selected_id:n(e).category_id,options:n(E),error:n(I),showDropdown:n(u),onSelect:t[1]||(t[1]=a=>{n(e).category_id==a?(n(e).category_id=null,n(e).subcategory_id=null):(n(e).category_id=a,n(e).subcategory_id=null)}),onOpen:t[2]||(t[2]=a=>u.value=a)},null,8,["selected_id","options","error","showDropdown"]),n(e).category_id?(i(),ce(M,{key:0,name:"Subcategorie",selected_id:n(e).subcategory_id,options:n(P),error:n(R),showDropdown:n(u),onSelect:t[3]||(t[3]=a=>n(e).subcategory_id=n(e).subcategory_id==a?null:a),onOpen:t[4]||(t[4]=a=>u.value=a)},null,8,["selected_id","options","error","showDropdown"])):_("",!0),y(M,{name:"Merk",selected_id:n(e).brand_id,options:n(H),error:n(U),showDropdown:n(u),onSelect:t[5]||(t[5]=a=>n(e).brand_id=n(e).brand_id==a?null:a),onOpen:t[6]||(t[6]=a=>u.value=a)},null,8,["selected_id","options","error","showDropdown"]),y(M,{name:"Winkel",selected_id:n(e).source_id,options:n(Z),error:n(G),showDropdown:n(u),onSelect:t[7]||(t[7]=a=>n(e).source_id=n(e).source_id==a?null:a),onOpen:t[8]||(t[8]=a=>u.value=a)},null,8,["selected_id","options","error","showDropdown"])]),_:1}),o("div",qe,[o("div",ze,[n(m)>0?(i(),l(b,{key:0},[v(" Totaal: "+r(n(m)),1)],64)):_("",!0)]),o("div",Ve,[t[16]||(t[16]=o("span",{class:"text-body-secondary lh-lg me-3 mt-1 d-none d-sm-inline"},"Sorteer:",-1)),N(o("select",{class:"form-select me-3","onUpdate:modelValue":t[9]||(t[9]=a=>_e(V)?V.value=a:null),onChange:q},t[15]||(t[15]=[o("option",{value:"price"},"Prijs (laag-hoog)",-1),o("option",{value:"price_desc"},"Prijs (hoog-laag)",-1),o("option",{value:"name"},"Naam",-1)]),544),[[ue,n(V)]]),o("button",{class:W(["btn",{active:n(w)}]),onClick:t[10]||(t[10]=a=>w.value=!0)},"Tegels",2),o("button",{class:W(["btn",{active:!n(w)}]),onClick:t[11]||(t[11]=a=>w.value=!1)},"Lijst",2)])]),n(p).length>0?(i(),l("div",Me,[n(w)?(i(),l("div",Oe,[(i(!0),l(b,null,S(n(p),a=>(i(),l("div",Ne,[o("div",Be,[y(O,{to:{name:"product-id",params:{id:a.id}},class:"d-flex"},{default:D(()=>[o("img",{src:a.image_link,class:"mt-3"},null,8,We)]),_:2},1032,["to"]),o("div",Fe,[o("h5",Le,[y(O,{to:{name:"product-id",params:{id:a.id}}},{default:D(()=>[v(r(a.name),1)]),_:2},1032,["to"])]),o("h6",Ae,r(a.brand_name),1),a.package_content_amount>0?(i(),l("h6",Ee,r(("pretty_package_content_amount"in s?s.pretty_package_content_amount:n(F))(a))+" "+r(("pretty_package_content_unit"in s?s.pretty_package_content_unit:n(L))(a.package_content_unit)),1)):_("",!0),(i(!0),l(b,null,S(a.product_sources,d=>(i(),l("div",null,[o("span",Ie,r(("pretty_price"in s?s.pretty_price:n($))(d.price)),1),d.min_items==1&&d.hidden_price!=d.price?(i(),l("span",Pe,r(("pretty_price"in s?s.pretty_price:n($))(d.hidden_price)),1)):_("",!0),o("a",{target:"_blank",href:d.link,class:"ms-2"},r(d.source_name),9,Re),o("div",null,[a.package_content_amount!=0?(i(),l("span",He," ("+r(("pretty_price_per_unit"in s?s.pretty_price_per_unit:n(B))(d.price,a.package_content_amount,a.package_content_unit))+") ",1)):_("",!0),o("span",null,r(d.promo),1)])]))),256))])])]))),256))])):_("",!0),n(w)?_("",!0):(i(),l("table",Ue,[t[17]||(t[17]=o("thead",null,[o("tr",null,[o("th",null,"Naam"),o("th",null,"Deals per winkel")])],-1)),o("tbody",null,[(i(!0),l(b,null,S(n(p),a=>(i(),l("tr",null,[o("td",null,[y(O,{to:{name:"product-id",params:{id:a.id}}},{default:D(()=>[v(r(a.brand_name)+" "+r(a.name)+" ",1),a.package_content_amount>0?(i(),l(b,{key:0},[v(" - "+r(("pretty_package_content_amount"in s?s.pretty_package_content_amount:n(F))(a))+" "+r(("pretty_package_content_unit"in s?s.pretty_package_content_unit:n(L))(a.package_content_unit)),1)],64)):_("",!0)]),_:2},1032,["to"])]),o("td",null,[(i(!0),l(b,null,S(a.product_sources,d=>(i(),l("div",null,[o("a",{target:"_blank",href:d.link},r(d.source_name),9,Ze),o("span",Ge,r(("pretty_price"in s?s.pretty_price:n($))(d.price)),1),a.package_content_amount!=0?(i(),l("span",Je," ("+r(("pretty_price_per_unit"in s?s.pretty_price_per_unit:n(B))(d.price,a.package_content_amount,a.package_content_unit))+") ",1)):_("",!0),d.min_items==1&&d.hidden_price!=d.price?(i(),l("span",Ke,r(("pretty_price"in s?s.pretty_price:n($))(d.hidden_price)),1)):_("",!0),a.package_content_amount!=0&&d.min_items==1&&d.hidden_price!=d.price?(i(),l("span",Qe,r(("pretty_price_per_unit"in s?s.pretty_price_per_unit:n(B))(d.hidden_price,a.package_content_amount,a.package_content_unit)),1)):_("",!0),d.promo?(i(),l("span",Xe,"("+r(d.promo)+")",1)):_("",!0),d.min_items>1?(i(),l("div",Ye,[o("span",null," of "+r(("pretty_price"in s?s.pretty_price:n($))(d.hidden_price)),1),a.package_content_amount!=0?(i(),l("span",xe," ("+r(("pretty_price_per_unit"in s?s.pretty_price_per_unit:n(B))(d.hidden_price,d.min_items*a.package_content_amount,a.package_content_unit))+") ",1)):_("",!0),o("span",null,[v(" voor "+r(d.min_items)+" verpakkingen ",1),o("span",en,"("+r(("pretty_package_content_amount"in s?s.pretty_package_content_amount:n(F))({package_content_amount:d.min_items*a.package_content_amount,package_content_unit:a.package_content_unit}))+" "+r(("pretty_package_content_unit"in s?s.pretty_package_content_unit:n(L))(a.package_content_unit))+")",1)])])):_("",!0)]))),256))])]))),256))])])),o("div",nn,[o("div",tn,[N(o("button",{class:"btn",onClick:t[12]||(t[12]=a=>{g.value--,q()})},"Vorige",512),[[J,n(g)>1]]),o("div",an," Pagina "+r(n(g))+" van "+r(n(T)),1),N(o("button",{class:"btn",onClick:t[13]||(t[13]=a=>{g.value++,q()})},"Volgende",512),[[J,n(g)<n(T)]])])])])):_("",!0),n(k)?(i(),l("div",on," Er ging iets mis met het ophalen van de gegevens: "+r(n(k)),1)):_("",!0),o("div",sn,[o("div",ln,[t[20]||(t[20]=o("h6",{class:"mt-3"},"** Wij van Dealsscanner.nl weten het wel... **",-1)),t[21]||(t[21]=o("div",null," Het leven is al druk en duur genoeg! Dus hebben we geen zin om te veel te betalen voor vitamines & mineralen, of lang te zoeken naar de beste aanbieding. Daarom zijn we deze site begonnen. ",-1)),t[22]||(t[22]=o("h6",{class:"mt-3"},"** Mis je iets? **",-1)),o("div",null,[t[19]||(t[19]=v(" De prijzen op Dealsscanner.nl worden elke dag bijgewerkt. Zo zie je altijd de nieuwste aanbiedingen. We voegen vaak nieuwe winkels en producten toe. Mis je iets? ")),y(O,{to:"/contact"},{default:D(()=>t[18]||(t[18]=[v("Laat het ons weten!")])),_:1,__:[18]})]),t[23]||(t[23]=o("h6",{class:"mt-3"},"** Altijd de beste aanbieding **",-1)),t[24]||(t[24]=o("div",null," We werken onafhankelijk van merken en winkels, en daar zijn we trots op! Op die manier kunnen we jou altijd de beste aanbieding laten zien. ",-1))])])],64)}}}),pn=K(rn,[["__scopeId","data-v-3bdf34bc"]]);export{pn as default};
