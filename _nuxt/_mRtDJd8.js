import{e as ne,s as le,f as oe,g as re,h as ce,i as _e,c as i,p as de,r as d,j as F,k as ue,o as l,a as t,b as V,l as _,m as Y,v as me,u as s,n as ee,w as N,t as r,F as p,q as b,x as T,y as pe,d as z,_ as ve}from"./BbIcd_7u.js";import{_ as ge}from"./BgQxG5Ej.js";import{s as S,p as P,a as U,b as q,c as M,g as ke}from"./StbxEHhx.js";const ye=Symbol.for("nuxt:client-only"),be=ne({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup($,{slots:c,attrs:v}){const m=le(!1);oe(()=>{m.value=!0});const y=re();return y&&(y._nuxtClientOnly=!0),de(ye,!0),()=>{var g;if(m.value){const u=(g=c.default)==null?void 0:g.call(c);return u&&u.length===1?[ce(u[0],v)]:u}const f=c.fallback||c.placeholder;if(f)return _e(f);const O=$.fallback||$.placeholder||"",D=$.fallbackTag||$.placeholderTag||"span";return i(D,v,O)}}}),he={class:"row justify-content-center"},fe={class:"col-lg-6"},we={class:"input-group mb-3 search-input"},Ce={key:0,class:"mb-3"},je={class:"scrollable"},Te=["onClick"],ze={key:0},$e={key:1,class:"mb-3"},Ve={class:"scrollable"},Ne=["onClick"],Se={key:0},qe={class:"mb-3"},De={class:"scrollable"},Ee=["onClick"],Me={key:0},Oe={class:"mb-3"},We={class:"scrollable"},Le=["onClick"],Ae={key:0},Be={class:"d-flex flex-row-reverse mb-3"},Ie={key:0},Re={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"},xe={class:"col"},Fe={class:"card h-100"},Pe=["src"],Ue={class:"card-body"},He={class:"card-title"},Ze={class:"card-subtitle text-body-secondary float-end"},Ge={key:0,class:"card-subtitle mb-3 text-body-secondary"},Je={class:"fs-5"},Ke={key:0,class:"text-decoration-line-through ms-1"},Qe=["href"],Xe={key:0,class:"text-body-secondary me-2"},Ye={key:1,class:"table"},en=["href"],nn={class:"ms-2"},tn={key:0,class:"text-body-secondary ms-1"},an={key:1,class:"text-decoration-line-through ms-1"},sn={key:2,class:"text-body-secondary text-decoration-line-through ms-1"},ln={key:3,class:"ms-2"},on={key:4},rn={key:0,class:"text-body-secondary"},cn={class:"text-body-secondary"},_n={key:1},dn={class:"row justify-content-center"},un={class:"col-xl-6"},mn=ne({__name:"index",async setup($){let c,v;const m=d(""),y=d([]),f=d(null);async function O(){if(!(m.value.trim().length>=3||u.value||w.value||k.value||h.value)){y.value=[];return}let e=S.from("search_results").select("*");m.value.trim().length>=3&&(e=e.or(`name.ilike.%${m.value}%,brand_name.ilike.%${m.value}%`)),u.value&&(e=e.eq("source_id",u.value)),w.value&&(e=e.eq("brand_id",w.value)),k.value&&(e=e.contains("category_ids",[k.value])),h.value&&(e=e.contains("subcategory_ids",[h.value])),["price","name"].includes(j.value)&&e.order(j.value),j.value=="price_desc"&&e.order("price",{ascending:!1});const{data:a,error:x}=await e;y.value=ke(a)??[],f.value=x}let D;function g(){clearTimeout(D),D=setTimeout(()=>{O()},500)}const u=d(null),H=d([]),W=d(null),Z=([c,v]=F(()=>S.from("sources").select("id, name").order("product_count",{ascending:!1}).order("name")),c=await c,v(),c);H.value=Z.data??[],W.value=Z.error;function te(e){u.value=u.value==e?null:e,g()}const w=d(null),G=d([]),L=d(null),J=([c,v]=F(()=>S.from("brands").select("id, name").order("product_count",{ascending:!1}).order("name")),c=await c,v(),c);G.value=J.data??[],L.value=J.error;function ae(e){w.value=w.value==e?null:e,g()}const k=d(null),A=d([]),B=d(null),K=([c,v]=F(()=>S.from("categories").select("id, name").order("order")),c=await c,v(),c);A.value=K.data??[],B.value=K.error;const I=ue(()=>A.value.find(e=>e.id==k.value));async function Q(e){k.value=k.value==e?null:e,g(),k.value?await se(k.value):h.value=null}const h=d(null),X=d([]),R=d(null);async function se(e){const a=await S.from("subcategories").select("id, name").eq("category_id",e).order("product_count",{ascending:!1}).order("name");X.value=a.data??[],R.value=a.error}function ie(e){h.value=h.value==e?null:e,g()}const C=d(!0),j=d("price");return(e,a)=>{const x=be,E=ge;return l(),i(p,null,[t("div",he,[t("div",fe,[t("div",we,[Y(t("input",{type:"text",placeholder:"Welk product zoek je?",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=n=>ee(m)?m.value=n:null),onInput:g},null,544),[[me,s(m)]]),a[5]||(a[5]=t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},[t("i",{class:"bi bi-search"})])],-1))])])]),V(x,null,{default:N(()=>[s(I)?(l(),i("div",Ce,[a[6]||(a[6]=t("h3",{class:"mb-3"},"Categorie",-1)),t("div",je,[t("button",{class:"btn active",onClick:a[1]||(a[1]=n=>Q(s(I).id))},r(s(I).name),1),(l(!0),i(p,null,b(s(X),n=>(l(),i("button",{class:T(["btn",s(h)==n.id?"active":""]),onClick:o=>ie(n.id)},r(n.name),11,Te))),256))]),s(R)?(l(),i("div",ze," Er ging iets mis met het ophalen van de gegevens: "+r(s(R)),1)):_("",!0)])):(l(),i("div",$e,[a[7]||(a[7]=t("h3",{class:"mb-3"},"Categorie",-1)),t("div",Ve,[(l(!0),i(p,null,b(s(A),n=>(l(),i("button",{class:T(["btn",s(k)==n.id?"active":""]),onClick:o=>Q(n.id)},r(n.name),11,Ne))),256))]),s(B)?(l(),i("div",Se," Er ging iets mis met het ophalen van de gegevens: "+r(s(B)),1)):_("",!0)])),t("div",qe,[a[8]||(a[8]=t("h3",{class:"mb-3"},"Merk",-1)),t("div",De,[(l(!0),i(p,null,b(s(G),n=>(l(),i("button",{class:T(["btn",s(w)==n.id?"active":""]),onClick:o=>ae(n.id)},r(n.name),11,Ee))),256))]),s(L)?(l(),i("div",Me," Er ging iets mis met het ophalen van de gegevens: "+r(s(L)),1)):_("",!0)]),t("div",Oe,[a[9]||(a[9]=t("h3",{class:"mb-3"},"Winkel",-1)),t("div",We,[(l(!0),i(p,null,b(s(H),n=>(l(),i("button",{class:T(["btn",s(u)==n.id?"active":""]),onClick:o=>te(n.id)},r(n.name),11,Le))),256))]),s(W)?(l(),i("div",Ae," Er ging iets mis met het ophalen van de gegevens: "+r(s(W)),1)):_("",!0)])]),_:1}),t("div",Be,[t("button",{class:T(["btn",s(C)?"":"active"]),onClick:a[2]||(a[2]=n=>C.value=!1)},"Lijst",2),t("button",{class:T(["btn",s(C)?"active":""]),onClick:a[3]||(a[3]=n=>C.value=!0)},"Tegels",2),Y(t("select",{class:"form-select me-3","onUpdate:modelValue":a[4]||(a[4]=n=>ee(j)?j.value=n:null),onChange:g},a[10]||(a[10]=[t("option",{value:"price"},"Prijs (laag-hoog)",-1),t("option",{value:"price_desc"},"Prijs (hoog-laag)",-1),t("option",{value:"name"},"Naam",-1)]),544),[[pe,s(j)]]),a[11]||(a[11]=t("span",{class:"text-body-secondary lh-lg me-3 d-none d-sm-inline"},"Sorteer:",-1))]),s(y).length>0?(l(),i("div",Ie,[s(C)?(l(),i("div",Re,[(l(!0),i(p,null,b(s(y),n=>(l(),i("div",xe,[t("div",Fe,[V(E,{to:{name:"product-id",params:{id:n.id}},class:"d-flex"},{default:N(()=>[t("img",{src:n.image_link,class:"mt-3"},null,8,Pe)]),_:2},1032,["to"]),t("div",Ue,[t("h5",He,[V(E,{to:{name:"product-id",params:{id:n.id}}},{default:N(()=>[z(r(n.name),1)]),_:2},1032,["to"])]),t("h6",Ze,r(n.brand_name),1),n.package_content_amount>0?(l(),i("h6",Ge,r(("pretty_package_content_amount"in e?e.pretty_package_content_amount:s(P))(n))+" "+r(("pretty_package_content_unit"in e?e.pretty_package_content_unit:s(U))(n.package_content_unit)),1)):_("",!0),(l(!0),i(p,null,b(n.product_sources,o=>(l(),i("div",null,[t("span",Je,r(("pretty_price"in e?e.pretty_price:s(q))(o.price)),1),o.min_items==1&&o.hidden_price!=o.price?(l(),i("span",Ke,r(("pretty_price"in e?e.pretty_price:s(q))(o.hidden_price)),1)):_("",!0),t("a",{target:"_blank",href:o.link,class:"ms-2"},r(o.source_name),9,Qe),t("div",null,[n.package_content_amount!=0?(l(),i("span",Xe," ("+r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.price,n.package_content_amount,n.package_content_unit))+") ",1)):_("",!0),t("span",null,r(o.promo),1)])]))),256))])])]))),256))])):_("",!0),s(C)?_("",!0):(l(),i("table",Ye,[a[12]||(a[12]=t("thead",null,[t("tr",null,[t("th",null,"Naam"),t("th",null,"Deals per winkel")])],-1)),t("tbody",null,[(l(!0),i(p,null,b(s(y),n=>(l(),i("tr",null,[t("td",null,[V(E,{to:{name:"product-id",params:{id:n.id}}},{default:N(()=>[z(r(n.brand_name)+" "+r(n.name)+" ",1),n.package_content_amount>0?(l(),i(p,{key:0},[z(" - "+r(("pretty_package_content_amount"in e?e.pretty_package_content_amount:s(P))(n))+" "+r(("pretty_package_content_unit"in e?e.pretty_package_content_unit:s(U))(n.package_content_unit)),1)],64)):_("",!0)]),_:2},1032,["to"])]),t("td",null,[(l(!0),i(p,null,b(n.product_sources,o=>(l(),i("div",null,[t("a",{target:"_blank",href:o.link},r(o.source_name),9,en),t("span",nn,r(("pretty_price"in e?e.pretty_price:s(q))(o.price)),1),n.package_content_amount!=0?(l(),i("span",tn," ("+r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.price,n.package_content_amount,n.package_content_unit))+") ",1)):_("",!0),o.min_items==1&&o.hidden_price!=o.price?(l(),i("span",an,r(("pretty_price"in e?e.pretty_price:s(q))(o.hidden_price)),1)):_("",!0),n.package_content_amount!=0&&o.min_items==1&&o.hidden_price!=o.price?(l(),i("span",sn,r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.hidden_price,n.package_content_amount,n.package_content_unit)),1)):_("",!0),o.promo?(l(),i("span",ln,"("+r(o.promo)+")",1)):_("",!0),o.min_items>1?(l(),i("div",on,[t("span",null," of "+r(("pretty_price"in e?e.pretty_price:s(q))(o.hidden_price)),1),n.package_content_amount!=0?(l(),i("span",rn," ("+r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.hidden_price,o.min_items*n.package_content_amount,n.package_content_unit))+") ",1)):_("",!0),t("span",null,[z(" voor "+r(o.min_items)+" verpakkingen ",1),t("span",cn,"("+r(("pretty_package_content_amount"in e?e.pretty_package_content_amount:s(P))({package_content_amount:o.min_items*n.package_content_amount,package_content_unit:n.package_content_unit}))+" "+r(("pretty_package_content_unit"in e?e.pretty_package_content_unit:s(U))(n.package_content_unit))+")",1)])])):_("",!0)]))),256))])]))),256))])]))])):_("",!0),s(f)?(l(),i("div",_n," Er ging iets mis met het ophalen van de gegevens: "+r(s(f)),1)):_("",!0),t("div",dn,[t("div",un,[a[15]||(a[15]=t("h6",{class:"mt-3"},"** Wij van Vitamine.dealsscanner.nl weten het wel... **",-1)),a[16]||(a[16]=t("div",null," Het leven is al druk en duur genoeg! Dus hebben we geen zin om teveel te betalen voor vitamines & mineralen, of lang te zoeken naar de beste aanbieding. Daarom zijn we deze site begonnen. ",-1)),a[17]||(a[17]=t("h6",{class:"mt-3"},"** Mis je iets? **",-1)),t("div",null,[a[14]||(a[14]=z(" De prijzen op Vitamine.dealsscanner.nl worden elke dag bijgewerkt. Zo zie je altijd de nieuwste aanbiedingen. We voegen vaak nieuwe winkels en producten toe. Mis je iets? ")),V(E,{to:"/contact"},{default:N(()=>a[13]||(a[13]=[z("Laat het ons weten!")])),_:1,__:[13]})]),a[18]||(a[18]=t("h6",{class:"mt-3"},"** Altijd de beste aanbieding **",-1)),a[19]||(a[19]=t("div",null," We werken onafhankelijk van merken en winkels, en daar zijn we trots op! Op die manier kunnen we jou altijd de beste aanbieding laten zien. ",-1))])])],64)}}}),kn=ve(mn,[["__scopeId","data-v-0df505a1"]]);export{kn as default};
