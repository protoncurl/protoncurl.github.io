import{e as te,s as le,f as oe,g as re,h as ce,c as i,i as _e,j as ue,r as u,k as H,l as de,a as n,b as D,m as _,n as Y,v as me,u as s,q as ee,w as N,x as z,y as pe,F as p,z as b,t as r,d as T,o as l,_ as ve}from"./Cfrdj0dF.js";import{_ as ge}from"./BwINuugj.js";import{s as S,g as ke,p as P,a as U,b as V,c as M}from"./C2wA0mIX.js";import{u as ye}from"./DMgU4nfL.js";const be=Symbol.for("nuxt:client-only"),he=te({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup($,{slots:c,attrs:v}){const m=le(!1);oe(()=>{m.value=!0});const y=_e();return y&&(y._nuxtClientOnly=!0),ue(be,!0),()=>{var g;if(m.value){const d=(g=c.default)==null?void 0:g.call(c);return d&&d.length===1?[re(d[0],v)]:d}const f=c.fallback||c.placeholder;if(f)return ce(f);const O=$.fallback||$.placeholder||"",q=$.fallbackTag||$.placeholderTag||"span";return i(q,v,O)}}}),fe={class:"row justify-content-center"},we={class:"col-lg-6"},Ce={class:"input-group mb-3 search-input"},je={key:0,class:"mb-3"},ze={class:"scrollable"},Te=["onClick"],$e={key:0},De={key:1,class:"mb-3"},Ne={class:"scrollable"},Se=["onClick"],Ve={key:0},qe={class:"mb-3"},Ee={class:"scrollable"},Me=["onClick"],Oe={key:0},We={class:"mb-3"},Le={class:"scrollable"},Ae=["onClick"],Be={key:0},Ie={class:"d-flex flex-row-reverse mb-3"},Re={key:0},Fe={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"},He={class:"col"},Pe={class:"card h-100"},Ue=["src"],Ze={class:"card-body"},xe={class:"card-title"},Ge={class:"card-subtitle text-body-secondary float-end"},Je={key:0,class:"card-subtitle mb-3 text-body-secondary"},Ke={class:"fs-5"},Qe={key:0,class:"text-decoration-line-through ms-1"},Xe=["href"],Ye={key:0,class:"text-body-secondary me-2"},et={key:1,class:"table"},tt=["href"],nt={class:"ms-2"},at={key:0,class:"text-body-secondary ms-1"},st={key:1,class:"text-decoration-line-through ms-1"},it={key:2,class:"text-body-secondary text-decoration-line-through ms-1"},lt={key:3,class:"ms-2"},ot={key:4},rt={key:0,class:"text-body-secondary"},ct={class:"text-body-secondary"},_t={key:1},ut={class:"row justify-content-center"},dt={class:"col-xl-6"},mt=te({__name:"vitamine",async setup($){let c,v;ye({title:"Vitamines & mineralen"});const m=u(""),y=u([]),f=u(null);async function O(){if(!(m.value.trim().length>=3||d.value||w.value||k.value||h.value)){y.value=[];return}let e=S.from("search_results").select("*");m.value.trim().length>=3&&(e=e.or(`name.ilike.%${m.value}%,brand_name.ilike.%${m.value}%`)),d.value&&(e=e.eq("source_id",d.value)),w.value&&(e=e.eq("brand_id",w.value)),k.value&&(e=e.contains("category_ids",[k.value])),h.value&&(e=e.contains("subcategory_ids",[h.value])),["price","name"].includes(j.value)&&e.order(j.value),j.value=="price_desc"&&e.order("price",{ascending:!1});const{data:a,error:F}=await e;y.value=ke(a)??[],f.value=F}let q;function g(){clearTimeout(q),q=setTimeout(()=>{O()},500)}const d=u(null),Z=u([]),W=u(null),x=([c,v]=H(()=>S.from("sources").select("id, name").order("product_count",{ascending:!1}).order("name")),c=await c,v(),c);Z.value=x.data??[],W.value=x.error;function ne(e){d.value=d.value==e?null:e,g()}const w=u(null),G=u([]),L=u(null),J=([c,v]=H(()=>S.from("brands").select("id, name").order("product_count",{ascending:!1}).order("name")),c=await c,v(),c);G.value=J.data??[],L.value=J.error;function ae(e){w.value=w.value==e?null:e,g()}const k=u(null),A=u([]),B=u(null),K=([c,v]=H(()=>S.from("categories").select("id, name").order("order")),c=await c,v(),c);A.value=K.data??[],B.value=K.error;const I=de(()=>A.value.find(e=>e.id==k.value));async function Q(e){k.value=k.value==e?null:e,g(),k.value?await se(k.value):h.value=null}const h=u(null),X=u([]),R=u(null);async function se(e){const a=await S.from("subcategories").select("id, name").eq("category_id",e).order("product_count",{ascending:!1}).order("name");X.value=a.data??[],R.value=a.error}function ie(e){h.value=h.value==e?null:e,g()}const C=u(!0),j=u("price");return(e,a)=>{const F=he,E=ge;return l(),i(p,null,[n("div",fe,[n("div",we,[n("div",Ce,[Y(n("input",{type:"text",placeholder:"Welk product zoek je?",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>ee(m)?m.value=t:null),onInput:g},null,544),[[me,s(m)]]),a[5]||(a[5]=n("div",{class:"input-group-append"},[n("span",{class:"input-group-text"},[n("i",{class:"bi bi-search"})])],-1))])])]),D(F,null,{default:N(()=>[s(I)?(l(),i("div",je,[a[6]||(a[6]=n("h3",{class:"mb-3"},"Categorie",-1)),n("div",ze,[n("button",{class:"btn active",onClick:a[1]||(a[1]=t=>Q(s(I).id))},r(s(I).name),1),(l(!0),i(p,null,b(s(X),t=>(l(),i("button",{class:z(["btn",s(h)==t.id?"active":""]),onClick:o=>ie(t.id)},r(t.name),11,Te))),256))]),s(R)?(l(),i("div",$e," Er ging iets mis met het ophalen van de gegevens: "+r(s(R)),1)):_("",!0)])):(l(),i("div",De,[a[7]||(a[7]=n("h3",{class:"mb-3"},"Categorie",-1)),n("div",Ne,[(l(!0),i(p,null,b(s(A),t=>(l(),i("button",{class:z(["btn",s(k)==t.id?"active":""]),onClick:o=>Q(t.id)},r(t.name),11,Se))),256))]),s(B)?(l(),i("div",Ve," Er ging iets mis met het ophalen van de gegevens: "+r(s(B)),1)):_("",!0)])),n("div",qe,[a[8]||(a[8]=n("h3",{class:"mb-3"},"Merk",-1)),n("div",Ee,[(l(!0),i(p,null,b(s(G),t=>(l(),i("button",{class:z(["btn",s(w)==t.id?"active":""]),onClick:o=>ae(t.id)},r(t.name),11,Me))),256))]),s(L)?(l(),i("div",Oe," Er ging iets mis met het ophalen van de gegevens: "+r(s(L)),1)):_("",!0)]),n("div",We,[a[9]||(a[9]=n("h3",{class:"mb-3"},"Winkel",-1)),n("div",Le,[(l(!0),i(p,null,b(s(Z),t=>(l(),i("button",{class:z(["btn",s(d)==t.id?"active":""]),onClick:o=>ne(t.id)},r(t.name),11,Ae))),256))]),s(W)?(l(),i("div",Be," Er ging iets mis met het ophalen van de gegevens: "+r(s(W)),1)):_("",!0)])]),_:1}),n("div",Ie,[n("button",{class:z(["btn",s(C)?"":"active"]),onClick:a[2]||(a[2]=t=>C.value=!1)},"Lijst",2),n("button",{class:z(["btn",s(C)?"active":""]),onClick:a[3]||(a[3]=t=>C.value=!0)},"Tegels",2),Y(n("select",{class:"form-select me-3","onUpdate:modelValue":a[4]||(a[4]=t=>ee(j)?j.value=t:null),onChange:g},a[10]||(a[10]=[n("option",{value:"price"},"Prijs (laag-hoog)",-1),n("option",{value:"price_desc"},"Prijs (hoog-laag)",-1),n("option",{value:"name"},"Naam",-1)]),544),[[pe,s(j)]]),a[11]||(a[11]=n("span",{class:"text-body-secondary lh-lg me-3 d-none d-sm-inline"},"Sorteer:",-1))]),s(y).length>0?(l(),i("div",Re,[s(C)?(l(),i("div",Fe,[(l(!0),i(p,null,b(s(y),t=>(l(),i("div",He,[n("div",Pe,[D(E,{to:{name:"product-id",params:{id:t.id}},class:"d-flex"},{default:N(()=>[n("img",{src:t.image_link,class:"mt-3"},null,8,Ue)]),_:2},1032,["to"]),n("div",Ze,[n("h5",xe,[D(E,{to:{name:"product-id",params:{id:t.id}}},{default:N(()=>[T(r(t.name),1)]),_:2},1032,["to"])]),n("h6",Ge,r(t.brand_name),1),t.package_content_amount>0?(l(),i("h6",Je,r(("pretty_package_content_amount"in e?e.pretty_package_content_amount:s(P))(t))+" "+r(("pretty_package_content_unit"in e?e.pretty_package_content_unit:s(U))(t.package_content_unit)),1)):_("",!0),(l(!0),i(p,null,b(t.product_sources,o=>(l(),i("div",null,[n("span",Ke,r(("pretty_price"in e?e.pretty_price:s(V))(o.price)),1),o.min_items==1&&o.hidden_price!=o.price?(l(),i("span",Qe,r(("pretty_price"in e?e.pretty_price:s(V))(o.hidden_price)),1)):_("",!0),n("a",{target:"_blank",href:o.link,class:"ms-2"},r(o.source_name),9,Xe),n("div",null,[t.package_content_amount!=0?(l(),i("span",Ye," ("+r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.price,t.package_content_amount,t.package_content_unit))+") ",1)):_("",!0),n("span",null,r(o.promo),1)])]))),256))])])]))),256))])):_("",!0),s(C)?_("",!0):(l(),i("table",et,[a[12]||(a[12]=n("thead",null,[n("tr",null,[n("th",null,"Naam"),n("th",null,"Deals per winkel")])],-1)),n("tbody",null,[(l(!0),i(p,null,b(s(y),t=>(l(),i("tr",null,[n("td",null,[D(E,{to:{name:"product-id",params:{id:t.id}}},{default:N(()=>[T(r(t.brand_name)+" "+r(t.name)+" ",1),t.package_content_amount>0?(l(),i(p,{key:0},[T(" - "+r(("pretty_package_content_amount"in e?e.pretty_package_content_amount:s(P))(t))+" "+r(("pretty_package_content_unit"in e?e.pretty_package_content_unit:s(U))(t.package_content_unit)),1)],64)):_("",!0)]),_:2},1032,["to"])]),n("td",null,[(l(!0),i(p,null,b(t.product_sources,o=>(l(),i("div",null,[n("a",{target:"_blank",href:o.link},r(o.source_name),9,tt),n("span",nt,r(("pretty_price"in e?e.pretty_price:s(V))(o.price)),1),t.package_content_amount!=0?(l(),i("span",at," ("+r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.price,t.package_content_amount,t.package_content_unit))+") ",1)):_("",!0),o.min_items==1&&o.hidden_price!=o.price?(l(),i("span",st,r(("pretty_price"in e?e.pretty_price:s(V))(o.hidden_price)),1)):_("",!0),t.package_content_amount!=0&&o.min_items==1&&o.hidden_price!=o.price?(l(),i("span",it,r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.hidden_price,t.package_content_amount,t.package_content_unit)),1)):_("",!0),o.promo?(l(),i("span",lt,"("+r(o.promo)+")",1)):_("",!0),o.min_items>1?(l(),i("div",ot,[n("span",null," of "+r(("pretty_price"in e?e.pretty_price:s(V))(o.hidden_price)),1),t.package_content_amount!=0?(l(),i("span",rt," ("+r(("pretty_price_per_unit"in e?e.pretty_price_per_unit:s(M))(o.hidden_price,o.min_items*t.package_content_amount,t.package_content_unit))+") ",1)):_("",!0),n("span",null,[T(" voor "+r(o.min_items)+" verpakkingen ",1),n("span",ct,"("+r(("pretty_package_content_amount"in e?e.pretty_package_content_amount:s(P))({package_content_amount:o.min_items*t.package_content_amount,package_content_unit:t.package_content_unit}))+" "+r(("pretty_package_content_unit"in e?e.pretty_package_content_unit:s(U))(t.package_content_unit))+")",1)])])):_("",!0)]))),256))])]))),256))])]))])):_("",!0),s(f)?(l(),i("div",_t," Er ging iets mis met het ophalen van de gegevens: "+r(s(f)),1)):_("",!0),n("div",ut,[n("div",dt,[a[15]||(a[15]=n("h6",{class:"mt-3"},"** Wij van Dealsscanner.nl weten het wel... **",-1)),a[16]||(a[16]=n("div",null," Het leven is al druk en duur genoeg! Dus hebben we geen zin om te veel te betalen voor vitamines & mineralen, of lang te zoeken naar de beste aanbieding. Daarom zijn we deze site begonnen. ",-1)),a[17]||(a[17]=n("h6",{class:"mt-3"},"** Mis je iets? **",-1)),n("div",null,[a[14]||(a[14]=T(" De prijzen op Dealsscanner.nl worden elke dag bijgewerkt. Zo zie je altijd de nieuwste aanbiedingen. We voegen vaak nieuwe winkels en producten toe. Mis je iets? ")),D(E,{to:"/contact"},{default:N(()=>a[13]||(a[13]=[T("Laat het ons weten!")])),_:1,__:[13]})]),a[18]||(a[18]=n("h6",{class:"mt-3"},"** Altijd de beste aanbieding **",-1)),a[19]||(a[19]=n("div",null," We werken onafhankelijk van merken en winkels, en daar zijn we trots op! Op die manier kunnen we jou altijd de beste aanbieding laten zien. ",-1))])])],64)}}}),yt=ve(mt,[["__scopeId","data-v-dba18b38"]]);export{yt as default};
