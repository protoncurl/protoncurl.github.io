import{e as te,s as ie,f as oe,g as re,h as ue,i as ce,c as l,p as de,r as c,j as P,k as _e,o as i,a as e,b as $,l as d,m as K,v as me,u as a,n as Q,w as V,t as o,F as b,q as y,x as T,y as ve,d as x,_ as pe}from"./CIqqWKRY.js";import{_ as ge}from"./BP5vY133.js";import{s as N,p as X,a as Y,b as q,c as ee,g as be}from"./DSqpekja.js";const ke=Symbol.for("nuxt:client-only"),ye=te({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(z,{slots:u,attrs:v}){const m=ie(!1);oe(()=>{m.value=!0});const k=re();return k&&(k._nuxtClientOnly=!0),de(ke,!0),()=>{var p;if(m.value){const _=(p=u.default)==null?void 0:p.call(u);return _&&_.length===1?[ue(_[0],v)]:_}const h=u.fallback||u.placeholder;if(h)return ce(h);const E=z.fallback||z.placeholder||"",S=z.fallbackTag||z.placeholderTag||"span";return l(S,v,E)}}}),fe={class:"row justify-content-center"},he={class:"col-lg-6"},we={class:"input-group mb-3 search-input"},Ce={key:0,class:"mb-3"},je={class:"scrollable"},Te=["onClick"],ze={key:0},$e={key:1,class:"mb-3"},Ve={class:"scrollable"},xe=["onClick"],Ne={key:0},Se={class:"mb-3"},Me={class:"scrollable"},qe=["onClick"],Ee={key:0},De={class:"mb-3"},Oe={class:"scrollable"},We=["onClick"],Le={key:0},Ae={class:"d-flex flex-row-reverse mb-3"},Be={key:0},Ie={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"},Pe={class:"col"},Re={class:"card h-100"},Fe=["src"],Ue={class:"card-body"},He={class:"card-title"},Ze={class:"card-subtitle text-body-secondary float-end"},Ge={key:0,class:"card-subtitle mb-3 text-body-secondary"},Je={class:"fs-5"},Ke={key:0,class:"text-decoration-line-through ms-1"},Qe=["href"],Xe={key:0,class:"text-body-secondary me-2"},Ye={key:1,class:"table"},et={key:0},tt={key:0,class:"text-body-secondary ms-1"},nt={key:1,class:"text-decoration-line-through ms-1"},st=["href"],at={class:"ms-2"},lt={key:1},it={class:"row justify-content-center"},ot={class:"col-xl-6"},rt=te({__name:"index",async setup(z){let u,v;const m=c(""),k=c([]),h=c(null);async function E(){if(!(m.value.trim().length>=3||_.value||w.value||g.value||f.value)){k.value=[];return}let t=N.from("search_results").select("*");m.value.trim().length>=3&&(t=t.or(`name.ilike.%${m.value}%,brand_name.ilike.%${m.value}%`)),_.value&&(t=t.eq("source_id",_.value)),w.value&&(t=t.eq("brand_id",w.value)),g.value&&(t=t.contains("category_ids",[g.value])),f.value&&(t=t.contains("subcategory_ids",[f.value])),["price","name"].includes(j.value)&&t.order(j.value),j.value=="price_desc"&&t.order("price",{ascending:!1});const{data:n,error:I}=await t;k.value=be(n)??[],h.value=I}let S;function p(){clearTimeout(S),S=setTimeout(()=>{E()},500)}const _=c(null),R=c([]),D=c(null),F=([u,v]=P(()=>N.from("sources").select("id, name").order("product_count",{ascending:!1}).order("name")),u=await u,v(),u);R.value=F.data??[],D.value=F.error;function ne(t){_.value=_.value==t?null:t,p()}const w=c(null),U=c([]),O=c(null),H=([u,v]=P(()=>N.from("brands").select("id, name").order("product_count",{ascending:!1}).order("name")),u=await u,v(),u);U.value=H.data??[],O.value=H.error;function se(t){w.value=w.value==t?null:t,p()}const g=c(null),W=c([]),L=c(null),Z=([u,v]=P(()=>N.from("categories").select("id, name").order("order")),u=await u,v(),u);W.value=Z.data??[],L.value=Z.error;const A=_e(()=>W.value.find(t=>t.id==g.value));async function G(t){g.value=g.value==t?null:t,p(),g.value?await ae(g.value):f.value=null}const f=c(null),J=c([]),B=c(null);async function ae(t){const n=await N.from("subcategories").select("id, name").eq("category_id",t).order("product_count",{ascending:!1}).order("name");J.value=n.data??[],B.value=n.error}function le(t){f.value=f.value==t?null:t,p()}const C=c(!0),j=c("price");return(t,n)=>{const I=ye,M=ge;return i(),l(b,null,[e("div",fe,[e("div",he,[e("div",we,[K(e("input",{type:"text",placeholder:"Welk product zoek je?",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=s=>Q(m)?m.value=s:null),onInput:p},null,544),[[me,a(m)]]),n[5]||(n[5]=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})])],-1))])])]),$(I,null,{default:V(()=>[a(A)?(i(),l("div",Ce,[n[6]||(n[6]=e("h3",{class:"mb-3"},"Categorie",-1)),e("div",je,[e("button",{class:"btn active",onClick:n[1]||(n[1]=s=>G(a(A).id))},o(a(A).name),1),(i(!0),l(b,null,y(a(J),s=>(i(),l("button",{class:T(["btn",a(f)==s.id?"active":""]),onClick:r=>le(s.id)},o(s.name),11,Te))),256))]),a(B)?(i(),l("div",ze," Er ging iets mis met het ophalen van de gegevens: "+o(a(B)),1)):d("",!0)])):(i(),l("div",$e,[n[7]||(n[7]=e("h3",{class:"mb-3"},"Categorie",-1)),e("div",Ve,[(i(!0),l(b,null,y(a(W),s=>(i(),l("button",{class:T(["btn",a(g)==s.id?"active":""]),onClick:r=>G(s.id)},o(s.name),11,xe))),256))]),a(L)?(i(),l("div",Ne," Er ging iets mis met het ophalen van de gegevens: "+o(a(L)),1)):d("",!0)])),e("div",Se,[n[8]||(n[8]=e("h3",{class:"mb-3"},"Merk",-1)),e("div",Me,[(i(!0),l(b,null,y(a(U),s=>(i(),l("button",{class:T(["btn",a(w)==s.id?"active":""]),onClick:r=>se(s.id)},o(s.name),11,qe))),256))]),a(O)?(i(),l("div",Ee," Er ging iets mis met het ophalen van de gegevens: "+o(a(O)),1)):d("",!0)]),e("div",De,[n[9]||(n[9]=e("h3",{class:"mb-3"},"Winkel",-1)),e("div",Oe,[(i(!0),l(b,null,y(a(R),s=>(i(),l("button",{class:T(["btn",a(_)==s.id?"active":""]),onClick:r=>ne(s.id)},o(s.name),11,We))),256))]),a(D)?(i(),l("div",Le," Er ging iets mis met het ophalen van de gegevens: "+o(a(D)),1)):d("",!0)])]),_:1}),e("div",Ae,[e("button",{class:T(["btn",a(C)?"":"active"]),onClick:n[2]||(n[2]=s=>C.value=!1)},"Lijst",2),e("button",{class:T(["btn",a(C)?"active":""]),onClick:n[3]||(n[3]=s=>C.value=!0)},"Tegels",2),K(e("select",{class:"form-select me-3","onUpdate:modelValue":n[4]||(n[4]=s=>Q(j)?j.value=s:null),onChange:p},n[10]||(n[10]=[e("option",{value:"price"},"Prijs (laag-hoog)",-1),e("option",{value:"price_desc"},"Prijs (hoog-laag)",-1),e("option",{value:"name"},"Naam",-1)]),544),[[ve,a(j)]]),n[11]||(n[11]=e("span",{class:"text-body-secondary lh-lg me-3 d-none d-sm-inline"},"Sorteer:",-1))]),a(k).length>0?(i(),l("div",Be,[a(C)?(i(),l("div",Ie,[(i(!0),l(b,null,y(a(k),s=>(i(),l("div",Pe,[e("div",Re,[$(M,{to:{name:"product-id",params:{id:s.id}},class:"d-flex"},{default:V(()=>[e("img",{src:s.image_link,class:"mt-3"},null,8,Fe)]),_:2},1032,["to"]),e("div",Ue,[e("h5",He,[$(M,{to:{name:"product-id",params:{id:s.id}}},{default:V(()=>[x(o(s.name),1)]),_:2},1032,["to"])]),e("h6",Ze,o(s.brand_name),1),s.package_content_amount>0?(i(),l("h6",Ge,o(("pretty_package_content_amount"in t?t.pretty_package_content_amount:a(X))(s))+" "+o(("pretty_package_content_unit"in t?t.pretty_package_content_unit:a(Y))(s.package_content_unit)),1)):d("",!0),(i(!0),l(b,null,y(s.product_sources,r=>(i(),l("div",null,[e("span",Je,o(("pretty_price"in t?t.pretty_price:a(q))(r.price)),1),r.min_items==1&&r.hidden_price!=r.price?(i(),l("span",Ke,o(("pretty_price"in t?t.pretty_price:a(q))(r.hidden_price)),1)):d("",!0),e("a",{target:"_blank",href:r.link,class:"ms-2"},o(r.source_name),9,Qe),e("div",null,[s.package_content_amount!=0?(i(),l("span",Xe," ("+o(("pretty_price_per_unit"in t?t.pretty_price_per_unit:a(ee))(r.price,s.package_content_amount,s.package_content_unit))+") ",1)):d("",!0),e("span",null,o(r.promo),1)])]))),256))])])]))),256))])):d("",!0),a(C)?d("",!0):(i(),l("table",Ye,[n[13]||(n[13]=e("thead",null,[e("tr",null,[e("th",null,"Naam"),e("th",null,"Merk"),e("th",null,"Prijs en winkel")])],-1)),e("tbody",null,[(i(!0),l(b,null,y(a(k),s=>(i(),l("tr",null,[e("td",null,[$(M,{to:{name:"product-id",params:{id:s.id}}},{default:V(()=>[x(o(s.name),1)]),_:2},1032,["to"]),n[12]||(n[12]=x(" - ")),s.package_content_amount>0?(i(),l("span",et,o(("pretty_package_content_amount"in t?t.pretty_package_content_amount:a(X))(s))+" "+o(("pretty_package_content_unit"in t?t.pretty_package_content_unit:a(Y))(s.package_content_unit)),1)):d("",!0)]),e("td",null,o(s.brand_name),1),e("td",null,[(i(!0),l(b,null,y(s.product_sources,r=>(i(),l("div",null,[e("span",null,o(("pretty_price"in t?t.pretty_price:a(q))(r.price)),1),s.package_content_amount!=0?(i(),l("span",tt,"("+o(("pretty_price_per_unit"in t?t.pretty_price_per_unit:a(ee))(r.price,s.package_content_amount,s.package_content_unit))+")",1)):d("",!0),r.min_items==1&&r.hidden_price!=r.price?(i(),l("span",nt,o(("pretty_price"in t?t.pretty_price:a(q))(r.hidden_price)),1)):d("",!0),e("a",{target:"_blank",href:r.link,class:"ms-2"},o(r.source_name),9,st),e("span",at,o(r.promo),1)]))),256))])]))),256))])]))])):d("",!0),a(h)?(i(),l("div",lt," Er ging iets mis met het ophalen van de gegevens: "+o(a(h)),1)):d("",!0),e("div",it,[e("div",ot,[n[16]||(n[16]=e("h6",{class:"mt-3"},"** Wij van Vitamine.dealsscanner.nl weten het wel... **",-1)),n[17]||(n[17]=e("div",null," Het leven is al druk en duur genoeg! Dus hebben we geen zin om teveel te betalen voor vitamines & mineralen, of lang te zoeken naar de beste aanbieding. Daarom zijn we deze site begonnen. ",-1)),n[18]||(n[18]=e("h6",{class:"mt-3"},"** Mis je iets? **",-1)),e("div",null,[n[15]||(n[15]=x(" De prijzen op Vitamine.dealsscanner.nl worden elke dag bijgewerkt. Zo zie je altijd de nieuwste aanbiedingen. We voegen vaak nieuwe winkels en producten toe. Mis je iets? ")),$(M,{to:"/contact"},{default:V(()=>n[14]||(n[14]=[x("Laat het ons weten!")])),_:1,__:[14]})]),n[19]||(n[19]=e("h6",{class:"mt-3"},"** Altijd de beste aanbieding **",-1)),n[20]||(n[20]=e("div",null," We werken onafhankelijk van merken en winkels, en daar zijn we trots op! Op die manier kunnen we jou altijd de beste aanbieding laten zien. ",-1))])])],64)}}}),_t=pe(rt,[["__scopeId","data-v-f722dc59"]]);export{_t as default};
